# ğŸ—ï¸ Arquitetura de IntegraÃ§Ã£o Slack - Navigator

## ğŸ“Š Diagrama de Arquitetura

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         INFRAESTRUTURA FORNECEDOR                        â•‘
â•‘                              (VocÃª - Navigator)                          â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘   â”‚              NAVIGATOR - SISTEMA SAAS                        â”‚      â•‘
â•‘   â”‚                                                               â”‚      â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚      â•‘
â•‘   â”‚  â”‚   Dashboard  â”‚  â”‚  API Backend â”‚  â”‚  PostgreSQL DB   â”‚  â”‚      â•‘
â•‘   â”‚  â”‚   (Frontend) â”‚  â”‚   (Node.js)  â”‚  â”‚  (Supabase)      â”‚  â”‚      â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚      â•‘
â•‘   â”‚         â”‚                   â”‚                   â”‚            â”‚      â•‘
â•‘   â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚      â•‘
â•‘   â”‚                             â”‚                                â”‚      â•‘
â•‘   â”‚                             â–¼                                â”‚      â•‘
â•‘   â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚      â•‘
â•‘   â”‚                   â”‚  tenant_settings â”‚                        â”‚      â•‘
â•‘   â”‚                   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                        â”‚      â•‘
â•‘   â”‚                   â”‚ â€¢ slack_token   â”‚                        â”‚      â•‘
â•‘   â”‚                   â”‚ â€¢ slack_webhook â”‚                        â”‚      â•‘
â•‘   â”‚                   â”‚ â€¢ team_id       â”‚                        â”‚      â•‘
â•‘   â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘   â”‚                    n8n WORKFLOW ENGINE                        â”‚      â•‘
â•‘   â”‚                                                               â”‚      â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â•‘
â•‘   â”‚  â”‚  Slack Webhook  â†’  Normalize  â†’  AI Agent  â†’  Send  â”‚   â”‚      â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â•‘
â•‘   â”‚         â”‚                                            â”‚        â”‚      â•‘
â•‘   â”‚         â”‚                                            â”‚        â”‚      â•‘
â•‘   â”‚         â–¼                                            â–¼        â”‚      â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â•‘
â•‘   â”‚  â”‚  Recebe de  â”‚                          â”‚  Envia para â”‚   â”‚      â•‘
â•‘   â”‚  â”‚  Slack â¬‡ï¸   â”‚                          â”‚  Slack â¬†ï¸   â”‚   â”‚      â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘   â”‚                      AI AGENT (OpenAI)                        â”‚      â•‘
â•‘   â”‚                                                               â”‚      â•‘
â•‘   â”‚  â€¢ Busca semÃ¢ntica em documentos (RAG)                       â”‚      â•‘
â•‘   â”‚  â€¢ GeraÃ§Ã£o de respostas contextualizadas                     â”‚      â•‘
â•‘   â”‚  â€¢ MemÃ³ria de conversaÃ§Ã£o                                    â”‚      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                                   â–²
                                   â”‚
                                   â”‚ HTTPS
                                   â”‚
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                       INFRAESTRUTURA CLIENTE                             â•‘
â•‘                        (Empresa que comprou Navigator)                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                          â•‘
â•‘   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â•‘
â•‘   â”‚                   SLACK WORKSPACE DO CLIENTE                  â”‚      â•‘
â•‘   â”‚                                                               â”‚      â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â•‘
â•‘   â”‚  â”‚  Slack App   â”‚         â”‚    FuncionÃ¡rios (UsuÃ¡rios)  â”‚   â”‚      â•‘
â•‘   â”‚  â”‚  "Navigator" â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚                             â”‚   â”‚      â•‘
â•‘   â”‚  â”‚              â”‚         â”‚  â€¢ JoÃ£o (RH)                â”‚   â”‚      â•‘
â•‘   â”‚  â”‚  Bot Token   â”‚         â”‚  â€¢ Maria (TI)               â”‚   â”‚      â•‘
â•‘   â”‚  â”‚  Webhooks    â”‚         â”‚  â€¢ Pedro (Vendas)           â”‚   â”‚      â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â€¢ Ana (Marketing)          â”‚   â”‚      â•‘
â•‘   â”‚         â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â•‘
â•‘   â”‚         â”‚                                                     â”‚      â•‘
â•‘   â”‚         â–¼                                                     â”‚      â•‘
â•‘   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚      â•‘
â•‘   â”‚  â”‚  Event Subscriptions (Slack API)                â”‚        â”‚      â•‘
â•‘   â”‚  â”‚  â€¢ message.im (DMs para o bot)                  â”‚        â”‚      â•‘
â•‘   â”‚  â”‚  â€¢ app_mention (MenÃ§Ãµes ao bot)                 â”‚        â”‚      â•‘
â•‘   â”‚  â”‚  â€¢ message.channels (Mensagens em canais)       â”‚        â”‚      â•‘
â•‘   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚      â•‘
â•‘   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â•‘
â•‘                                                                          â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Fluxo de Dados Detalhado

### **FASE 1: ConfiguraÃ§Ã£o Inicial (Uma Ãºnica vez)**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CLIENTE configura integraÃ§Ã£o no Navigator                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£ Admin acessa Dashboard â†’ Configurador                      â”‚
â”‚  2ï¸âƒ£ Seleciona tipo de comunicaÃ§Ã£o: "Slack"                     â”‚
â”‚  3ï¸âƒ£ Preenche campos:                                           â”‚
â”‚     â€¢ Bot Token (xoxb-...)                                     â”‚
â”‚     â€¢ Team ID (T012345...)                                     â”‚
â”‚     â€¢ Webhook URL do n8n                                       â”‚
â”‚  4ï¸âƒ£ Navigator salva em tenant_settings                         â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **FASE 2: Onboarding de Novo FuncionÃ¡rio**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  RH CADASTRA novo funcionÃ¡rio                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£ RH acessa Navigator â†’ FuncionÃ¡rios â†’ Adicionar            â”‚
â”‚  2ï¸âƒ£ Preenche dados:                                            â”‚
â”‚     â€¢ Nome: JoÃ£o Silva                                         â”‚
â”‚     â€¢ Email: joao@empresa.com                                  â”‚
â”‚     â€¢ Departamento: TI                                         â”‚
â”‚     â€¢ Cargo: Desenvolvedor                                     â”‚
â”‚  3ï¸âƒ£ Clica em "Salvar"                                          â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  BACKEND PROCESSA                                    â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  â€¢ Salva funcionÃ¡rio no DB                          â”‚      â”‚
â”‚  â”‚  â€¢ Busca configuraÃ§Ã£o do tenant:                    â”‚      â”‚
â”‚  â”‚    - communication_type = 'slack'                   â”‚      â”‚
â”‚  â”‚    - slack_bot_token = 'xoxb-...'                   â”‚      â”‚
â”‚  â”‚    - slack_team_id = 'T012345...'                   â”‚      â”‚
â”‚  â”‚  â€¢ Gera Deep Link Slack:                            â”‚      â”‚
â”‚  â”‚    slack://user?team=T012345&id=U067890             â”‚      â”‚
â”‚  â”‚  â€¢ Gera QR Code (opcional)                          â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  4ï¸âƒ£ Navigator envia E-MAIL para joao@empresa.com              â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  ğŸ“§ TEMPLATE DO E-MAIL                              â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  OlÃ¡ JoÃ£o,                                          â”‚      â”‚
â”‚  â”‚                                                      â”‚      â”‚
â”‚  â”‚  Bem-vindo Ã  [EMPRESA]!                             â”‚      â”‚
â”‚  â”‚                                                      â”‚      â”‚
â”‚  â”‚  Para facilitar seu onboarding, criamos um          â”‚      â”‚
â”‚  â”‚  assistente virtual no Slack.                       â”‚      â”‚
â”‚  â”‚                                                      â”‚      â”‚
â”‚  â”‚  [ğŸ’¬ Clique aqui para comeÃ§ar]                      â”‚      â”‚
â”‚  â”‚   (Link: slack://user?team=T012345&id=U067890)      â”‚      â”‚
â”‚  â”‚                                                      â”‚      â”‚
â”‚  â”‚  Ou escaneie o QR Code:                             â”‚      â”‚
â”‚  â”‚  [QR CODE IMAGE]                                    â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **FASE 3: FuncionÃ¡rio Conversa com o Bot**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  FUNCIONÃRIO interage com o bot                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1ï¸âƒ£ JoÃ£o recebe e-mail                                         â”‚
â”‚  2ï¸âƒ£ Clica no link â†’ Slack abre automaticamente                â”‚
â”‚  3ï¸âƒ£ DM com @navigator-bot Ã© aberto                             â”‚
â”‚  4ï¸âƒ£ JoÃ£o digita: "Quais sÃ£o os benefÃ­cios da empresa?"        â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  SLACK ENVIA EVENTO                                 â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  POST https://hndll.app.n8n.cloud/webhook/slack     â”‚      â”‚
â”‚  â”‚  {                                                   â”‚      â”‚
â”‚  â”‚    "event": {                                        â”‚      â”‚
â”‚  â”‚      "type": "message",                             â”‚      â”‚
â”‚  â”‚      "channel": "D01234567",                        â”‚      â”‚
â”‚  â”‚      "user": "U9876543",                            â”‚      â”‚
â”‚  â”‚      "text": "Quais sÃ£o os benefÃ­cios?"             â”‚      â”‚
â”‚  â”‚    },                                                â”‚      â”‚
â”‚  â”‚    "team_id": "T012345"                             â”‚      â”‚
â”‚  â”‚  }                                                   â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  5ï¸âƒ£ n8n RECEBE e PROCESSA                                     â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  WORKFLOW n8n                                        â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  1. Webhook recebe evento Slack                     â”‚      â”‚
â”‚  â”‚  2. Normaliza dados:                                â”‚      â”‚
â”‚  â”‚     {                                                â”‚      â”‚
â”‚  â”‚       "from": "U9876543",                           â”‚      â”‚
â”‚  â”‚       "message": "Quais sÃ£o os benefÃ­cios?",        â”‚      â”‚
â”‚  â”‚       "channel": "D01234567",                       â”‚      â”‚
â”‚  â”‚       "team_id": "T012345"                          â”‚      â”‚
â”‚  â”‚     }                                                â”‚      â”‚
â”‚  â”‚  3. Identifica tenant pelo team_id                  â”‚      â”‚
â”‚  â”‚  4. Busca documentos do tenant                      â”‚      â”‚
â”‚  â”‚  5. Chama AI Agent com contexto                     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  6ï¸âƒ£ AI AGENT PROCESSA                                         â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  AI AGENT (OpenAI + RAG)                            â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  1. Gera embedding da pergunta                      â”‚      â”‚
â”‚  â”‚  2. Busca semÃ¢ntica em documentos:                  â”‚      â”‚
â”‚  â”‚     SELECT * FROM documents                         â”‚      â”‚
â”‚  â”‚     WHERE tenant_id = '...'                         â”‚      â”‚
â”‚  â”‚     ORDER BY embedding <=> query_embedding          â”‚      â”‚
â”‚  â”‚     LIMIT 5                                          â”‚      â”‚
â”‚  â”‚  3. Encontra: "BenefÃ­cios Bem-Estar.pdf"            â”‚      â”‚
â”‚  â”‚  4. Monta contexto + pergunta                       â”‚      â”‚
â”‚  â”‚  5. OpenAI gera resposta:                           â”‚      â”‚
â”‚  â”‚     "Nossa empresa oferece:                         â”‚      â”‚
â”‚  â”‚      â€¢ Vale-refeiÃ§Ã£o R$ 45/dia                      â”‚      â”‚
â”‚  â”‚      â€¢ Plano de saÃºde Unimed                        â”‚      â”‚
â”‚  â”‚      â€¢ Vale-transporte                              â”‚      â”‚
â”‚  â”‚      â€¢ Gympass..."                                  â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  7ï¸âƒ£ n8n ENVIA RESPOSTA para Slack                             â”‚
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  HTTP REQUEST                                        â”‚      â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
â”‚  â”‚  POST https://slack.com/api/chat.postMessage        â”‚      â”‚
â”‚  â”‚  Headers:                                            â”‚      â”‚
â”‚  â”‚    Authorization: Bearer xoxb-...                   â”‚      â”‚
â”‚  â”‚  Body:                                               â”‚      â”‚
â”‚  â”‚    {                                                 â”‚      â”‚
â”‚  â”‚      "channel": "D01234567",                        â”‚      â”‚
â”‚  â”‚      "text": "Nossa empresa oferece:..."            â”‚      â”‚
â”‚  â”‚    }                                                 â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                                                                 â”‚
â”‚  8ï¸âƒ£ JoÃ£o VÃŠ A RESPOSTA no Slack                               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” Modelo de SeguranÃ§a Multi-Tenant

### **Isolamento por Tenant**

```sql
-- Cada empresa (tenant) tem seus prÃ³prios dados isolados

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tenant: EMPRESA A (ID: uuid-aaa)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Slack Config:                                          â”‚
â”‚    â€¢ team_id: T012345                                   â”‚
â”‚    â€¢ bot_token: xoxb-111...                            â”‚
â”‚  Documentos:                                            â”‚
â”‚    â€¢ BenefÃ­cios_EmpresaA.pdf                           â”‚
â”‚    â€¢ Manual_EmpresaA.docx                              â”‚
â”‚  FuncionÃ¡rios:                                          â”‚
â”‚    â€¢ JoÃ£o, Maria, Pedro                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Tenant: EMPRESA B (ID: uuid-bbb)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Slack Config:                                          â”‚
â”‚    â€¢ team_id: T678901                                   â”‚
â”‚    â€¢ bot_token: xoxb-222...                            â”‚
â”‚  Documentos:                                            â”‚
â”‚    â€¢ Politicas_EmpresaB.pdf                            â”‚
â”‚    â€¢ Onboarding_EmpresaB.pdf                           â”‚
â”‚  FuncionÃ¡rios:                                          â”‚
â”‚    â€¢ Ana, Carlos, Beatriz                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **Fluxo de IdentificaÃ§Ã£o do Tenant**

```javascript
// Quando recebe mensagem do Slack

1. Extrair team_id da mensagem: "T012345"

2. Buscar tenant no banco:
   SELECT * FROM tenant_settings 
   WHERE setting_key = 'slack_team_id' 
   AND setting_value = 'T012345'
   
3. Obter tenant_id: "uuid-aaa"

4. Buscar documentos APENAS deste tenant:
   SELECT * FROM documents 
   WHERE tenant_id = 'uuid-aaa'
   
5. AI responde com contexto APENAS da Empresa A
```

---

## ğŸ“¦ Responsabilidades

### **ğŸ¢ FORNECEDOR (VocÃª - Navigator)**

| Componente | DescriÃ§Ã£o |
|-----------|-----------|
| **Dashboard** | Interface web para configuraÃ§Ã£o |
| **API Backend** | Processa cadastros e configuraÃ§Ãµes |
| **Banco de Dados** | Armazena dados de todos os tenants (isolados) |
| **n8n Workflow** | Orquestra comunicaÃ§Ã£o com Slack |
| **AI Agent** | Processa perguntas e gera respostas |
| **DocumentaÃ§Ã£o** | Guias de integraÃ§Ã£o para clientes |
| **Suporte** | Ajuda clientes na configuraÃ§Ã£o |

### **ğŸ¢ CLIENTE (Empresa que compra)**

| Componente | DescriÃ§Ã£o |
|-----------|-----------|
| **Slack Workspace** | Workspace prÃ³prio da empresa |
| **Slack App** | Criar app "Navigator Bot" no workspace |
| **Bot Token** | Gerar e fornecer para Navigator |
| **PermissÃµes** | Configurar scopes necessÃ¡rios |
| **Documentos** | Upload de PDFs/DOCs no Navigator |
| **UsuÃ¡rios** | Cadastro de funcionÃ¡rios no Navigator |

---

## âœ… Vantagens desta Arquitetura

1. **ğŸ”’ Isolamento Total**: Cada cliente tem dados 100% separados
2. **ğŸš€ EscalÃ¡vel**: Suporta milhares de empresas simultaneamente
3. **ğŸ”§ ConfiguraÃ§Ã£o Simples**: Cliente configura uma vez e pronto
4. **ğŸ’° SaaS Real**: Infraestrutura centralizada, multi-tenant
5. **ğŸ¯ Zero ManutenÃ§Ã£o**: Cliente nÃ£o precisa gerenciar servidores
6. **ğŸ“Š Analytics Centralizados**: VocÃª vÃª mÃ©tricas de todos os clientes
7. **ğŸ”„ AtualizaÃ§Ãµes AutomÃ¡ticas**: Melhoria beneficia todos

---

## ğŸ¯ Resumo Executivo

**Para o FORNECEDOR (VocÃª):**
- MantÃ©m 1 infraestrutura para N clientes
- Cobra mensalidade por tenant (empresa)
- Controla toda a IA e processamento
- Escala horizontalmente

**Para o CLIENTE:**
- Paga mensalidade SaaS
- Usa Slack prÃ³prio da empresa
- Configura uma vez
- FuncionÃ¡rios interagem naturalmente
- Zero infraestrutura prÃ³pria necessÃ¡ria

**Modelo de NegÃ³cio:**
```
Cliente paga: R$ 499/mÃªs
  â†“
Acesso ao Navigator
  â†“
Integra com Slack prÃ³prio
  â†“
FuncionÃ¡rios conversam com bot
  â†“
IA responde com documentos da empresa
```

---

**Este Ã© o modelo SaaS perfeito para onboarding empresarial!** ğŸš€

